@{
    ViewData["title"] = "Yemek Düzenle";
}

@model AddFoodViewModel


@section style {
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css" rel="stylesheet">
    <style>
        .photo-box {
            width: 120px;
            height: 120px;
            background-color: #f8f9fa;
            border: 2px dashed #ccc;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #888;
            font-size: 14px;
            border-radius: 6px;
        }
    </style>

}
<div class="container py-5">
    <h2 class="mb-4">Yemek Düzenle</h2>
    <div id="addCheck" class="col-md-12"></div>
    <div class="row g-4">
        <!-- Sol: Fotoğraflar -->
        <div class="col-md-5">
            <div class="addCheck"></div>
            <div id="fimages"></div>
            <div id="f-images" class="row gy-2 gx-2">
                <!-- resimler  -->
                @{
                    var iix = 0;
                }
                @foreach (string img in Model.imgForEdit)
                {
                    iix++;
                    <div class="col-4 position-relative fir-com" name="photoDiv" data-id="@iix">
                        <div class="photo-box border rounded p-1 mb-2">
                            <button type="button"
                                class="btn btn-sm btn-danger position-absolute top-0 end-0 m-1 delete-image" title="Sil"
                                style="z-index: 2;">&times;</button>
                            <img src="/food-img/@img" style="width: 100%; height: auto;" class="img-fluid rounded" />
                            <input type="hidden" class="deletedImg" name="photoName" value="@img">
                        </div>
                    </div>
                }

            </div>

            <div class="mt-4">
                <input class="form-control" id="images" type="file" multiple>
            </div>

        </div>

        <!-- Sağ: Form -->
        <div class="col-md-7">
            <input type="hidden" id="foodEditUrl" value="@Url.Action("FoodEdit","Food")">
            <div class="mb-4">
                <label class="form-label" for="foodName">Yemeğin İsmi</label>
                <div id="fname"></div>
                <input type="text" class="form-control" id="foodName" value="@Model.isim"
                    placeholder="Bir isim ekleyin" />
            </div>

            <div class="mb-4">
                <label class="form-label" for="foodDescription">Açıklama</label>
                <div id="fdesc"></div>
                <input type="text" class="form-control" id="foodDescription" value="@Model.aciklama"
                    placeholder="Bir açıklama ekleyin" />
            </div>

            <!-- İçindekiler -->
            <div class="mb-4">
                <label class="form-label">İçindekiler</label>
                <div id="ingDiv"></div>
                <div class="input-group mb-2">
                    <input type="text" class="form-control" id="ingredientText" placeholder="Bir malzeme ekleyin" />
                    <button class="btn btn-outline-secondary" id="addIngredient" type="button">Ekle</button>
                </div>
                <ul class="list-group" id="ingredients">
                    <!-- içindekiler -->
                    <!-- ******* -->
                    @foreach (Ingredient ingredient in Model.ingredients)
                    {
                        <div class="ingredient-item" data-id="@ingredient.IngredientsID">
                            <li class="list-group-item d-flex justify-content-between">
                                <div class="d-flex edit-area">
                                    <i class="bi bi-arrow-right"></i>
                                    <p class="mb-0 ms-2" name="IngredientsText">@ingredient.Text</p>
                                    <input type="hidden" name="IngredientsInput" value="@ingredient.Text">
                                </div>
                                <div>
                                    <button class="btn btn-primary delIngredient" type="button"><i
                                            class="bi bi-trash3"></i></button>
                                    <button class="btn btn-danger editIngredient" type="button"><i
                                            class="bi bi-pencil"></i></button>
                                </div>
                            </li>
                        </div>
                    }
                </ul>
            </div>

            <!-- Adımlar -->
            <div class="mb-4">
                <label class="form-label">Adımlar</label>
                <div id="stepDiv"></div>
                <div class="input-group mb-2">
                    <input type="text" id="stepText" class="form-control" placeholder="Bir adım ekleyin" />
                    <button class="btn btn-outline-secondary" id="Addsteps" type="button">Ekle</button>
                </div>
                <ol class="list-group list-group-numbered" id="steps">
                    <!-- adımlar -->
                    @foreach (Step step in Model.steps)
                    {
                        <div class="step-item" data-id="@step.StepID">
                            <li class="list-group-item d-flex justify-content-between">
                                <div class="d-flex edit-area">
                                    <i class="bi bi-arrow-right"></i>
                                    <p class="mb-0 ms-2" name="stepsText">@step.Text</p>
                                    <input type="hidden" name="stepsInput" value="@step.Text">
                                </div>
                                <div>
                                    <button class="btn btn-primary delStep" type="button"><i
                                            class="bi bi-trash3"></i></button>
                                    <button class="btn btn-danger editStep" type="button"><i
                                            class="bi bi-pencil"></i></button>
                                </div>
                            </li>
                        </div>
                    }
                </ol>
            </div>

            <!-- Etiketler -->
            <div class="mb-3">
                <label class="form-label">Etiketler</label>
                <div class="row">
                    @foreach (var ftype in Model.Ftypes)
                    {
                        <div class="col-6 col-md-4">
                            <div class="form-check">
                                <input class="form-check-input" id="tag_@ftype.TypeID" type="checkbox" value="@ftype.TypeID"
                                    name="ftypeIDs" @(Model.selectFtypes.Any(t => t == ftype.TypeID) ? "checked" : "") />
                                <label class="form-check-label" for="tag_@ftype.TypeID">@ftype.Name</label>
                            </div>
                        </div>
                    }
                </div>
            </div>

            <input id="url" type="hidden" value="@Model.foodUrl">

            <button class="btn btn-primary mt-3" id="EditFood" type="button">Düzenlemeyi Tamamla</button>
        </div> <!-- ./col-md-7 -->
    </div> <!-- ./row -->
</div> <!-- ./container -->
<script src="/js/Food/foodEdit.js"></script>